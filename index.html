<script>
  document.getElementById('profileForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const form = new FormData(e.target);

    if (!confirm('입력된 번호로 가입비 할인 안내됩니다. 이대로 진행하시겠습니까?')) return;

    const data = {};
    form.forEach((value, key) => {
      data[key] = value;
    });

    // 가입비 예상값 산출 (고정 예시값 사용 중)
    const feeEstimate = "400~500만원대";
    data['fee_estimate'] = feeEstimate; // 이 줄이 핵심!

    fetch('https://api.sheetbest.com/sheets/afc89a9d-4771-437a-9bd7-e1761d1c0e17', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    })
    .then(res => res.json())
    .then(() => {
      document.getElementById('result').style.display = 'block';
      document.getElementById('result').innerText = `예상 가입비는 ${feeEstimate}입니다.
(입력하신 조건 기준 산출된 예시입니다. 입력하신 연락처로 가입비 할인 안내 예정입니다)`;
    })
    .catch(() => {
      alert('제출 중 오류가 발생했습니다.');
    });
  });
</script>
